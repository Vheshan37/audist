generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model case_information {
  id                  Int         @id @default(autoincrement())
  phase               Int         @db.UnsignedInt
  settlement_fee      Float?
  next_settlment_date DateTime?   @db.Date
  image_path          String?     @db.VarChar(255)
  case_person_id      Int
  cases_case_number   String      @db.VarChar(45)
  case_person         case_person @relation(fields: [case_person_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_case_information_case_person1")
  cases               cases       @relation(fields: [cases_case_number], references: [case_number], onDelete: NoAction, onUpdate: NoAction, map: "fk_case_information_cases1")

  @@index([case_person_id], map: "fk_case_information_case_person1_idx")
  @@index([cases_case_number], map: "fk_case_information_cases1_idx")
}

model case_person {
  id                                                          Int                @id @default(autoincrement())
  person_1                                                    Int
  person_2                                                    Int
  person_3                                                    Int
  case_information                                            case_information[]
  case_person_status_case_person_person_1Tocase_person_status case_person_status @relation("case_person_person_1Tocase_person_status", fields: [person_1], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_case_person_case_person_status1")
  case_person_status_case_person_person_2Tocase_person_status case_person_status @relation("case_person_person_2Tocase_person_status", fields: [person_2], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_case_person_case_person_status2")
  case_person_status_case_person_person_3Tocase_person_status case_person_status @relation("case_person_person_3Tocase_person_status", fields: [person_3], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_case_person_case_person_status3")

  @@index([person_1], map: "fk_case_person_case_person_status1_idx")
  @@index([person_2], map: "fk_case_person_case_person_status2_idx")
  @@index([person_3], map: "fk_case_person_case_person_status3_idx")
}

model case_person_status {
  id                                                   Int           @id @default(autoincrement())
  status                                               String        @db.VarChar(45)
  case_person_case_person_person_1Tocase_person_status case_person[] @relation("case_person_person_1Tocase_person_status")
  case_person_case_person_person_2Tocase_person_status case_person[] @relation("case_person_person_2Tocase_person_status")
  case_person_case_person_person_3Tocase_person_status case_person[] @relation("case_person_person_3Tocase_person_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model case_status {
  id     Int     @id @default(autoincrement())
  status String  @db.VarChar(8)
  cases  cases[]
}

model cases {
  case_number      String             @id @db.VarChar(45)
  referee_no       String             @map("referee no") @db.VarChar(20)
  name             String             @db.VarChar(45)
  organization     String             @db.VarChar(45)
  value            Float
  case_date        DateTime           @db.Date
  image            String             @db.VarChar(255)
  nic              String             @db.VarChar(15)
  user_id          String             @db.VarChar(255)
  case_status_id   Int
  case_information case_information[]
  case_status      case_status        @relation(fields: [case_status_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_cases_case_status1")
  user             user               @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_cases_user1")
  cash_collection  cash_collection[]

  @@index([case_status_id], map: "fk_cases_case_status1_idx")
  @@index([user_id], map: "fk_cases_user1_idx")
}

model cash_collection {
  id              Int       @id @default(autoincrement())
  case_number     String    @db.VarChar(45)
  payment         Float
  collection_date DateTime? @db.Date
  description     String?   @db.Text
  cases           cases     @relation(fields: [case_number], references: [case_number], onDelete: NoAction, onUpdate: NoAction, map: "fk_cash_collection_cases1")

  @@index([case_number], map: "fk_cash_collection_cases1_idx")
}

model division {
  id       Int    @id @default(autoincrement())
  division String @db.VarChar(45)
  user     user[]
}

model user {
  id          String   @id @db.VarChar(255)
  name        String   @db.VarChar(45)
  division_id Int
  cases       cases[]
  division    division @relation(fields: [division_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_division")

  @@index([division_id], map: "fk_user_division_idx")
}
